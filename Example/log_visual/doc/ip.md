# IP地址合法性

正确的IP地址格式

> * 以点号为分隔的域为4或6（IPV6）；
> * 除点号外全部为数字；
> * 第一个和最后一个字节不能为0；
> * 所有字节的数值不能超过255；
> * 最后一个字节不能为255；（这是子网广播地址）


## grep 方式

```
a=192.168.1.1
echo $a |grep "^[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}$"|grep -v "\.0[0-9]\{1,2\}"|grep -v "^0[0-9]\{1,2\}" || return 1
```

## awk 方式

```
a=192.168.1.1
echo $a |awk -F. '{if(NF==4 && $1>0 && $1<=255 && $2>=0 && $2<=255 && $3>=0 && $3<=255 && $4>0 && $4<255) exit 0; else exit 1}'
```
